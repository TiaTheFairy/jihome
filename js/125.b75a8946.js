"use strict";(self["webpackChunkjihome_front"]=self["webpackChunkjihome_front"]||[]).push([[125],{2125:function(t,s,e){e.r(s),e.d(s,{default:function(){return p}});var i=function(){var t=this,s=t._self._c;return s("div",[s("div",[s("el-card",{staticClass:"card",attrs:{shadow:"hover"}},[s("el-divider",{staticClass:"divider",attrs:{"content-position":"right"},on:{click:t.closeHollowDetail}},[s("div",{staticClass:"back"},[s("el-image",{staticClass:"backIcon",attrs:{src:e(7596)}}),s("span",{staticClass:"backWord"},[t._v(t._s(t.$t("Hollow.DetailReturn")))])],1)]),s("div",{staticClass:"content"},[s("div",{staticClass:"user"},[s("span",{staticClass:"avatar"},[s("el-avatar",{attrs:{shape:"square",size:80,src:t.avatar}})],1),s("span",{staticClass:"userInfo"},[s("div",{staticClass:"username",on:{click:function(s){return t.openUserPage(t.userid,t.nick)}}},[t._v(t._s(t.username))]),s("div",{staticClass:"school"},[t._v(t._s(t.school))])])]),s("div",{staticClass:"middle"},[s("div",{staticClass:"detail"},[t._v(t._s(t.detail))])]),t.picture.length?s("div",{staticClass:"picture"},t._l(t.picture,(function(t){return s("span",{key:t},[s("span",{staticClass:"pictureItem"},[s("el-image",{attrs:{src:t,width:"200px"}})],1)])})),0):t._e()]),s("div",{staticClass:"footer"},[s("div",{staticClass:"action"},[s("span",{staticClass:"time"},[t._v(t._s(t.time))]),s("span",{staticClass:"buttons"},[t.alreadyLike?t._e():s("span",{staticClass:"like",on:{click:t.clickLike}},[s("el-image",{staticClass:"aAction",attrs:{src:e(4065)}}),s("span",[t._v("("+t._s(t.like)+")")])],1),t.alreadyLike?s("span",{staticClass:"like",on:{click:t.clickLike}},[s("el-image",{staticClass:"aAction",attrs:{src:e(1139)}}),s("span",[t._v("("+t._s(t.like)+")")])],1):t._e(),s("el-image",{staticClass:"aAction",attrs:{src:e(8359)},on:{click:t.clickShare}}),t.isOwner||t.isAdmin?s("el-image",{staticClass:"aAction",attrs:{src:e(8889)},on:{click:t.clickDelete}}):s("el-image",{staticClass:"aAction",attrs:{src:e(1283)},on:{click:function(s){return t.clickReport("hd",t.postID)}}})],1)]),s("div",{staticClass:"comment"},[s("span",{staticClass:"commentBox"},[s("el-input",{staticClass:"inputBox",attrs:{placeholder:this.$t("Hollow.DetailCommentTip"),type:"textarea",resize:"none",rows:"3"},model:{value:t.inputComment,callback:function(s){t.inputComment=s},expression:"inputComment"}})],1),s("span",{staticClass:"commentButtons"},[s("el-badge",{attrs:{value:t.commentsAmount}},[s("el-button",{attrs:{type:"primary"},on:{click:function(s){return t.submitComment(0)}}},[t._v(t._s(t.$t("Hollow.DetailCommentSend")))])],1),s("br"),s("el-checkbox",{model:{value:t.nickComment,callback:function(s){t.nickComment=s},expression:"nickComment"}},[t._v(t._s(t.$t("Hollow.DetailCommentSendNick")))])],1)])])],1),s("div",{staticClass:"comments"},t._l(t.comments,(function(i){return s("div",{key:i.commentid,ref:i.commentid,refInFor:!0,staticClass:"aComment"},[s("el-card",{staticClass:"card",attrs:{shadow:"hover"}},[s("div",{staticClass:"commentTop"},[s("span",{staticClass:"commentUsername",on:{click:function(s){return t.openUserPage(i.userid,i.nick)}}},[t._v(t._s(i.username))]),s("span",{staticClass:"commentSchool"},[t._v(t._s(i.school))]),s("span",{staticClass:"commentTime"},[t._v(t._s(i.time))])]),s("div",{staticClass:"commentContent"},[s("span",{staticClass:"commentDetail"},[t._v(t._s(i.content))])]),s("div",{staticClass:"commentRight"},[i.isOwner||t.isAdmin?s("el-image",{staticClass:"aAction",attrs:{src:e(8889)},on:{click:function(s){return t.deleteComment(i.commentid)}}}):s("el-image",{staticClass:"aAction",attrs:{src:e(1283)},on:{click:function(s){return t.clickReport("hc",i.commentid)}}})],1)])],1)})),0)],1)])},o=[],a=(e(7658),e(4161)),n=e(680),l=e(1780),c=e(691);const r=(0,c.kP)("1234567890",9);var m={name:"hollow-detail",data(){return{avatar:"",postID:0,nick:0,userid:0,username:"USERNAME",school:0,detail:"CONTENT",time:"",like:0,picture:[],comments:[],commentsAmount:0,inputComment:"",nickComment:!1,alreadyLike:!1,isOwner:!1,isAdmin:!1}},methods:{clickShare(){this.copyLink(this.$t("Hollow.DetailShared"))},closeHollowDetail(){this.$bus.$emit("showHollowList")},getHollowDetail(){const t=this.loading();(0,a.Z)({method:"post",url:l.Z.getHollowItem,data:new URLSearchParams({postid:this.postID,cookie:n.Z.get("loginCookie")})}).then((s=>{if(t.close(),200!=s.status)this.alert(this.$t("System.NetworkIssue"),this.$t("System.Error"));else if("HOLLOW_GETITEM_COMPLETE"==s.data.status){if(this.postID==s.data.postid){if(this.nick=s.data.nick,this.detail=s.data.content,this.like=s.data.like,this.userid=s.data.userid,this.isOwner=s.data.isOwner,this.username=this.formatUsername(s.data.username,this.nick,this.isOwner),this.school=this.formatSchool(s.data.school),this.time=this.formatTime(s.data.time),s.data.picture.length>0)for(let t in s.data.picture.split(","))this.picture.push(l.Z.server+s.data.picture.split(",")[t]);this.comments=s.data.comments,this.commentsAmount=this.comments.length;for(let t in this.comments)this.comments[t].username=this.formatUsername(this.comments[t].username,this.comments[t].nick,this.comments[t].isOwner),this.comments[t].time=this.formatTime(this.comments[t].time),this.comments[t].school=this.formatSchool(this.comments[t].school);this.alreadyLike=s.data.alreadyLike,this.avatar=this.getUserAvatar(this.userid),setTimeout((()=>{if(localStorage.getItem("adminworkReportShowOriginalCommentID")){let t=localStorage.getItem("adminworkReportShowOriginalCommentID");this.$refs[t][0]&&(this.$refs[t][0].scrollIntoView({behavior:"smooth",block:"center"}),this.$refs[t][0].style="background-color: red;border-radius:15px;"),localStorage.removeItem("adminworkReportShowOriginalCommentID")}}),1e3)}}else this.notfound()}))},clickLike(){if(this.alreadyLike)this.$message.error(this.$t("Hollow.DetailLiked"));else{const t=this.loading();(0,a.Z)({method:"post",url:l.Z.postHollowLike,data:new URLSearchParams({cookie:n.Z.get("loginCookie"),postid:this.postID})}).then((s=>{t.close(),200!=s.status?this.alert(this.$t("System.NetworkIssue"),this.$t("System.Error")):"HOLLOW_LIKE_COMPLETE"==s.data&&this.redirect("hollowDetail",this.postID)}))}},clickDelete(){(this.isOwner||this.isAdmin)&&this.$confirm(this.$t("Hollow.DetailDeleteWarn"),this.$t("System.Warning"),{confirmButtonText:this.$t("System.Yes"),cancelButtonText:this.$t("System.No"),type:"warning"}).then((()=>{const t=this.loading();(0,a.Z)({method:"post",url:l.Z.deleteHollowItem,data:new URLSearchParams({cookie:n.Z.get("loginCookie"),postid:this.postID})}).then((s=>{t.close(),200!=s.status?this.alert(this.$t("System.NetworkIssue"),this.$t("System.Error")):"HOLLOW_DELETE_COMPLETE"==s.data&&(this.$message.success(this.$t("Hollow.DetailDeleteComplete")),this.$bus.$emit("refreshHollowList"),this.$bus.$emit("showHollowList"))}))})).catch((()=>{}))},deleteComment(t){for(let s of this.comments)if(t==s.commentid||this.isAdmin){this.$confirm(this.$t("Hollow.DetailDeleteWarn"),this.$t("System.Warning"),{confirmButtonText:this.$t("System.Yes"),cancelButtonText:this.$t("System.No"),type:"warning"}).then((()=>{const s=this.loading();(0,a.Z)({method:"post",url:l.Z.deleteHollowComment,data:new URLSearchParams({cookie:n.Z.get("loginCookie"),postid:this.postID,commentid:t})}).then((t=>{s.close(),200!=t.status?this.alert(this.$t("System.NetworkIssue"),this.$t("System.Error")):"HOLLOW_DELETE_COMPLETE"==t.data&&(this.$message.success(this.$t("Hollow.DetailDeleteComplete")),this.getHollowDetail())}))})).catch((()=>{}));break}},clickReport(t,s){this.$prompt(this.$t("General.ReportReason"),this.$t("General.Report"),{}).then((e=>{e.value&&this.report(n.Z.get("loginCookie"),t,s,e.value,location.href)}))},submitComment(){if(this.inputComment.length<2||this.inputComment.length>40)this.alert(this.$t("Hollow.DetailCommentBadLength"),this.$t("System.Warning"));else{const t=this.loading();(0,a.Z)({method:"post",url:l.Z.postHollowComment,data:new URLSearchParams({cookie:n.Z.get("loginCookie"),content:this.inputComment,postid:this.postID,commentid:r(),isNick:this.nickComment?1:0,alertid:r(),link:location.href})}).then((s=>{if(t.close(),200!=s.status)this.alert(this.$t("System.NetworkIssue"),this.$t("System.Error"));else{if("HOLLOW_COMMENTID_TAKEN"==s.data||"HOLLOW_COMMENT_ALERTIDTAKEN"==s.data)return void this.submitComment();"HOLLOW_COMMENT_COMPLETE"==s.data&&this.redirect("hollowDetail",this.postID)}}))}}},mounted(){this.postID=this.$route.params.id,this.getHollowDetail(),this.isAdmin=this.getIfAdmin()}},h=m,d=e(1001),u=(0,d.Z)(h,i,o,!1,null,"b24459c4",null),p=u.exports}}]);
//# sourceMappingURL=125.b75a8946.js.map