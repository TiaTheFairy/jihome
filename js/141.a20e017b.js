"use strict";(self["webpackChunkjihome_front"]=self["webpackChunkjihome_front"]||[]).push([[141],{2141:function(t,s,i){i.r(s),i.d(s,{default:function(){return $}});var o=function(){var t=this,s=t._self._c;return s("div",[s("div",{staticClass:"login"},[s("div",{staticClass:"email"},[s("el-input",{staticClass:"inputBox",attrs:{placeholder:t.$t("Login.InputEmail")},model:{value:t.loginEmail,callback:function(s){t.loginEmail=s},expression:"loginEmail"}})],1),s("div",{staticClass:"password"},[s("el-input",{staticClass:"inputBox",attrs:{placeholder:t.$t("Login.InputPassword"),"show-password":""},model:{value:t.loginPassword,callback:function(s){t.loginPassword=s},expression:"loginPassword"}})],1),s("div",[s("el-button",{staticClass:"submitLogin",attrs:{type:"success"},on:{click:t.login}},[t._v(t._s(t.$t("Login.Login")))])],1)]),s("div",{staticClass:"switchToRegister"},[s("el-link",{on:{click:t.switchToRegister}},[t._v(t._s(t.$t("Login.GotoRegister")))])],1)])},e=[],n=i(4161),a=i(9702),l=i.n(a),r=i(680),g=i(1780),h=i(691);const c=(0,h.kP)("1234567890ABCDEFGHIJKLMNOPQRSTUVWXYZ",25);var u={name:"comp-login",data(){return{loginEmail:"",loginPassword:""}},methods:{switchToRegister(){this.$bus.$emit("switchLogin","register")},login(){if(""==this.loginEmail||""==this.loginPassword)this.alert(this.$t("Login.LoginInfoEmpty"),this.$t("System.Error"));else{const t=this.loading();let s=c();(0,n.Z)({method:"post",url:g.Z.login,data:new URLSearchParams({email:this.loginEmail,password:l()(this.loginPassword),cookie:s})}).then((i=>{t.close(),200!=i.status?this.alert(this.$t("System.NetworkIssue"),this.$t("System.Error")):"LOGIN_NOMATCH"==i.data?this.alert(this.$t("Login.LoginInfoWrong"),this.$t("System.Warning")):"LOGIN_BANNED"==i.data.status?this.alert(this.$t("User.Banned"),this.$t("System.Warning")):"LOGIN_SUCCESS"==i.data.status?(this.notify(this.$t("Login.LoginSuccess"),this.$t("Login.LoginWelcome")+i.data.username),this.$bus.$emit("closeLogin"),r.Z.set("loginCookie",s,{expires:7}),r.Z.set("loginAs",s,{expires:1}),location.reload()):this.alert("Unexpected Response!",this.$t("System.Error"))}))}},autoLogin(){if(r.Z.get("loginCookie")){const t=this.loading();(0,n.Z)({method:"post",url:g.Z.autoLogin,data:new URLSearchParams({cookie:r.Z.get("loginCookie")})}).then((s=>{t.close(),200!=s.status?this.alert(this.$t("System.NetworkIssue"),this.$t("System.Error")):"LOGIN_SUCCESS"==s.data.status?(this.notify(this.$t("Login.LoginSuccess"),this.$t("Login.LoginWelcome")+s.data.username),this.$bus.$emit("closeLogin"),r.Z.set("loginAs",r.Z.get("loginCookie"),{expires:1})):(r.Z.remove("loginCookie"),r.Z.remove("loginAs"))}))}}},mounted(){this.$bus.$on("autoLogin",this.autoLogin)},beforeDestroy(){this.$bus.$off("autoLogin")}},d=u,m=i(1001),L=(0,m.Z)(d,o,e,!1,null,"0c4df480",null),$=L.exports}}]);
//# sourceMappingURL=141.a20e017b.js.map