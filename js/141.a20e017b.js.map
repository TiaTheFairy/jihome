{"version":3,"file":"js/141.a20e017b.js","mappings":"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","sources":["webpack://jihome_front/./src/components/pages/comp_login/CompLogin.vue","webpack://jihome_front/src/components/pages/comp_login/CompLogin.vue","webpack://jihome_front/./src/components/pages/comp_login/CompLogin.vue?efdd","webpack://jihome_front/./src/components/pages/comp_login/CompLogin.vue?86fb"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('div',{staticClass:\"login\"},[_c('div',{staticClass:\"email\"},[_c('el-input',{staticClass:\"inputBox\",attrs:{\"placeholder\":_vm.$t(\"Login.InputEmail\")},model:{value:(_vm.loginEmail),callback:function ($$v) {_vm.loginEmail=$$v},expression:\"loginEmail\"}})],1),_c('div',{staticClass:\"password\"},[_c('el-input',{staticClass:\"inputBox\",attrs:{\"placeholder\":_vm.$t(\"Login.InputPassword\"),\"show-password\":\"\"},model:{value:(_vm.loginPassword),callback:function ($$v) {_vm.loginPassword=$$v},expression:\"loginPassword\"}})],1),_c('div',[_c('el-button',{staticClass:\"submitLogin\",attrs:{\"type\":\"success\"},on:{\"click\":_vm.login}},[_vm._v(_vm._s(_vm.$t('Login.Login')))])],1)]),_c('div',{staticClass:\"switchToRegister\"},[_c('el-link',{on:{\"click\":_vm.switchToRegister}},[_vm._v(_vm._s(_vm.$t('Login.GotoRegister')))])],1)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <div class='login'>\r\n      <div class='email'>\r\n        <el-input class='inputBox' v-model='loginEmail' :placeholder='$t(\"Login.InputEmail\")'></el-input>\r\n      </div>\r\n      <div class='password'>\r\n        <el-input class='inputBox' v-model='loginPassword' :placeholder='$t(\"Login.InputPassword\")'\r\n          show-password></el-input>\r\n      </div>\r\n      <div>\r\n        <el-button class='submitLogin' type='success' @click='login'>{{$t('Login.Login')}}</el-button>\r\n      </div>\r\n    </div>\r\n\r\n    <div class='switchToRegister'>\r\n      <el-link @click='switchToRegister'>{{$t('Login.GotoRegister')}}</el-link>\r\n    </div>\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\nimport md5 from 'js-md5'\r\nimport Cookies from 'js-cookie'\r\nimport * as server from '../../../server.js'\r\n\r\nimport { customAlphabet } from 'nanoid';\r\nconst cookieGenerator = customAlphabet('1234567890ABCDEFGHIJKLMNOPQRSTUVWXYZ', 25);\r\nexport default {\r\n  name: 'comp-login',\r\n  data () {\r\n    return {\r\n      loginEmail: '',\r\n      loginPassword: ''\r\n    }\r\n  },\r\n  methods: {\r\n    switchToRegister () {\r\n      this.$bus.$emit('switchLogin', 'register')\r\n    },\r\n    login () {\r\n      if (this.loginEmail == '' || this.loginPassword == '') {\r\n        this.alert(this.$t(\"Login.LoginInfoEmpty\"), this.$t('System.Error'))\r\n      }\r\n      else {\r\n        const loadingInstance = this.loading();\r\n        let newCookie = cookieGenerator();\r\n\r\n        axios({\r\n          method: 'post',\r\n          url: server.default.login,\r\n          data: new URLSearchParams({\r\n            'email': this.loginEmail,\r\n            'password': md5(this.loginPassword),\r\n            'cookie': newCookie\r\n          })\r\n        }).then((response) => {\r\n          loadingInstance.close();\r\n          if (response.status != 200) {\r\n            this.alert(this.$t('System.NetworkIssue'), this.$t('System.Error'))\r\n          }\r\n          else {\r\n            if (response.data == 'LOGIN_NOMATCH') {\r\n              this.alert(this.$t('Login.LoginInfoWrong'), this.$t('System.Warning'))\r\n            }\r\n            else if (response.data.status == 'LOGIN_BANNED') {\r\n              this.alert(this.$t('User.Banned'), this.$t('System.Warning'))\r\n            }\r\n            else if (response.data.status == 'LOGIN_SUCCESS') {\r\n              this.notify(this.$t('Login.LoginSuccess'), this.$t('Login.LoginWelcome') + response.data.username);\r\n              this.$bus.$emit('closeLogin');\r\n              Cookies.set('loginCookie', newCookie, { expires: 7 });\r\n              Cookies.set('loginAs', newCookie, { expires: 1 });\r\n              location.reload();\r\n            }\r\n            else {\r\n              this.alert('Unexpected Response!', this.$t('System.Error'));\r\n            }\r\n          }\r\n        })\r\n      }\r\n    },\r\n    autoLogin () {\r\n      if (Cookies.get('loginCookie')) {\r\n        const loadingInstance = this.loading();\r\n\r\n        axios({\r\n          method: 'post',\r\n          url: server.default.autoLogin,\r\n          data: new URLSearchParams({\r\n            'cookie': Cookies.get('loginCookie')\r\n          })\r\n        }).then((response) => {\r\n          loadingInstance.close();\r\n          if (response.status != 200) {\r\n            this.alert(this.$t('System.NetworkIssue'), this.$t('System.Error'))\r\n          }\r\n          else {\r\n            if (response.data.status == 'LOGIN_SUCCESS') {\r\n              this.notify(this.$t('Login.LoginSuccess'), this.$t('Login.LoginWelcome') + response.data.username);\r\n              this.$bus.$emit('closeLogin');\r\n              Cookies.set('loginAs', Cookies.get('loginCookie'), { expires: 1 });\r\n            }\r\n            else {\r\n              Cookies.remove('loginCookie');\r\n              Cookies.remove('loginAs');\r\n            }\r\n          }\r\n        })\r\n      }\r\n    }\r\n  },\r\n  mounted () {\r\n    this.$bus.$on('autoLogin', this.autoLogin);\r\n\r\n    // this.autoLogin();\r\n  },\r\n  beforeDestroy () {\r\n    this.$bus.$off('autoLogin')\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.inputBox {\r\n  width: 70%;\r\n  margin-bottom: 15px;\r\n}\r\n.submitLogin {\r\n  font-size: 17px;\r\n  margin-top: 10px;\r\n  margin-bottom: 20px;\r\n}\r\n.el-link {\r\n  text-decoration: underline;\r\n  font-size: 15px;\r\n}\r\n</style>","import mod from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./CompLogin.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./CompLogin.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CompLogin.vue?vue&type=template&id=0c4df480&scoped=true&\"\nimport script from \"./CompLogin.vue?vue&type=script&lang=js&\"\nexport * from \"./CompLogin.vue?vue&type=script&lang=js&\"\nimport style0 from \"./CompLogin.vue?vue&type=style&index=0&id=0c4df480&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0c4df480\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","attrs","$t","model","value","loginEmail","callback","$$v","expression","loginPassword","on","login","_v","_s","switchToRegister","staticRenderFns","cookieGenerator","customAlphabet","name","data","methods","$bus","$emit","alert","loadingInstance","loading","newCookie","axios","method","url","server","URLSearchParams","md5","then","response","close","status","notify","username","Cookies","expires","location","reload","autoLogin","mounted","$on","beforeDestroy","$off","component"],"sourceRoot":""}