"use strict";(self["webpackChunkjihome_front"]=self["webpackChunkjihome_front"]||[]).push([[226],{226:function(t,e,i){i.r(e),i.d(e,{default:function(){return A}});var s=function(){var t=this,e=t._self._c;return e("div",[e("div",[e("el-card",{staticClass:"card",attrs:{shadow:"hover"}},[e("el-divider",{staticClass:"divider",attrs:{"content-position":"right"},on:{click:t.backLafList}},[e("div",{staticClass:"back"},[e("el-image",{staticClass:"backIcon",attrs:{src:i(7596)}}),e("span",{staticClass:"backWord"},[t._v(t._s(t.$t("General.Return")))])],1)]),e("div",{staticClass:"tag"},[e("el-switch",{staticStyle:{display:"block"},attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-text":this.$t("Laf.TagFound"),"inactive-text":this.$t("Laf.TagLost"),"active-value":0,"inactive-value":1},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}})],1),e("div",{staticClass:"new"},[e("div",{staticClass:"itemInfo"},[e("el-input",{staticClass:"inputBox name",attrs:{placeholder:this.$t("Laf.Name"),minlength:"2",maxlength:"16"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),e("el-input",{staticClass:"inputBox desc",attrs:{placeholder:this.$t("Laf.Desc"),minlength:"2",maxlength:"50"},model:{value:t.desc,callback:function(e){t.desc=e},expression:"desc"}})],1),e("div",{staticClass:"itemLocation"},[e("el-input",{staticClass:"inputBox school",attrs:{disabled:""},model:{value:t.showSchool,callback:function(e){t.showSchool=e},expression:"showSchool"}}),e("el-input",{staticClass:"inputBox location",attrs:{placeholder:this.$t("Laf.Location"),minlength:"5",maxlength:"16"},model:{value:t.location,callback:function(e){t.location=e},expression:"location"}}),0==t.type?e("el-input",{staticClass:"inputBox placeLocation",attrs:{placeholder:this.$t("Laf.PlaceInput")},model:{value:t.placeLocation,callback:function(e){t.placeLocation=e},expression:"placeLocation"}}):t._e()],1),e("div",{staticClass:"time"},[e("el-date-picker",{staticClass:"timePicker",attrs:{type:"date",placeholder:this.$t("Laf.TimeSelectDate"),align:"right","value-format":"yyyyMMdd",size:"small",clearable:!1,"picker-options":t.timePickerDateOptions,editable:!1},on:{change:function(e){return t.changeDate()}},model:{value:t.timePicker[0],callback:function(e){t.$set(t.timePicker,0,e)},expression:"timePicker[0]"}}),e("el-time-picker",{staticClass:"timePicker",attrs:{placeholder:this.$t("Laf.TimeSelectTime"),"value-format":"HHmmss",size:"small",clearable:!1,"picker-options":t.timePickerTimeOptions,disabled:null==t.timePicker[0],editable:!1},on:{focus:t.setTimePickerTimeOptions},model:{value:t.timePicker[1],callback:function(e){t.$set(t.timePicker,1,e)},expression:"timePicker[1]"}})],1),e("div",{staticClass:"uploadPic"},[e("el-upload",{staticClass:"uploader",attrs:{action:"server.default.uploadImg","show-file-list":!1,"http-request":t.uploadPicture,"before-upload":t.beforePictureUpload}},[t.picture?e("img",{staticClass:"avatarImage",attrs:{src:t.picture}}):e("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),e("div",{staticClass:"button"},[e("el-button",{staticClass:"button",attrs:{type:"primary"},on:{click:function(e){return t.submit(0)}}},[t._v(t._s(t.$t("Laf.Confirm")))])],1)])],1)],1)])},a=[],o=i(4161),c=i(680),l=i(1780),r=i(691);const n=(0,r.kP)("1234567890",9);var h={name:"laf-new",data(){return{type:0,userID:"",name:"",desc:"",school:"",showSchool:"",location:"",placeLocation:"",picture:"",pictureRaw:"",timePicker:[],timePickerDateOptions:{disabledDate(t){return t.getTime()>=Date.now()}},timePickerTimeOptions:{}}},methods:{backLafList(){this.$bus.$emit("showLafList")},submit(){if(""==this.name||""==this.desc||""==this.location||!this.timePicker[0]||!this.timePicker[1]||0==this.type&&""==this.pictureRaw)return this.alert(this.$t("Laf.NewConfirmInfoEmpty"),this.$t("System.Error")),!1;this.$confirm(this.$t("Laf.NewConfirmAsk"),this.$t("System.Warning"),{confirmButtonText:this.$t("System.Yes"),cancelButtonText:this.$t("System.No"),type:"warning"}).then((()=>{const t=this.loading();(0,o.Z)({method:"post",url:l.Z.postLaf,data:new URLSearchParams({userid:this.userID,lafid:n(),type:this.type,name:this.name,desc:this.desc,school:this.school,location:this.location,placeLocation:0==this.type?this.placeLocation:"",thatTime:this.formatTime(),picture:this.pictureRaw})}).then((e=>{if(t.close(),200!=e.status)this.alert(this.$t("System.NetworkIssue"),this.$t("System.Error"));else{if("LAF_LAFID_TAKEN"==e.data)return void this.submit();"LAF_POST_COMPLETE"==e.data.status&&(this.$bus.$emit("refreshLafList"),this.alert(this.$t("Laf.NewCompleteJump"),this.$t("Laf.NewComplete"),(()=>{this.$bus.$emit("showLafDetail",e.data.lafid)})))}}))})).catch((()=>{}))},getSchool(){const t=this.loading();(0,o.Z)({method:"post",url:l.Z.user,data:new URLSearchParams({type:"me",cookie:c.Z.get("loginAs")})}).then((e=>{t.close(),200!=e.status?this.alert(this.$t("System.NetworkIssue"),this.$t("System.Error")):"USER_NOMATCH"==e.data?this.alert(this.$t("System.IllegalRequest"),this.$t("System.Error")):"USER_FOUND"==e.data.status&&(this.userID=e.data.userid,this.school=e.data.school,this.showSchool=this.formatSchool(e.data.school))}))},formatTime(){let t=this.timePicker[0].substring(0,4)+"/"+this.timePicker[0].substring(4,6)+"/"+this.timePicker[0].substring(6,8)+" ";return t+=this.timePicker[1].substring(0,2)+":"+this.timePicker[1].substring(2,4)+":"+this.timePicker[1].substring(4,6),new Date(t).getTime()},changeDate(){this.timePicker[1]=null,this.timePickerTimeOptions={}},setTimePickerTimeOptions(){let t=new Date,e=t.getFullYear().toString();e+=t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1,e+=t.getDate()<10?"0"+t.getDate():t.getDate();let i=[];i[0]=t.getHours()<10?"0"+t.getHours().toString():t.getHours().toString(),i[1]=t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes(),i[1]<10&&(i[1]+=60,i[0]-=1),i[2]=t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds(),this.timePickerTimeOptions={selectableRange:"00:00:00 - "+(this.timePicker[0]==e?i[0]+":"+(i[1]-10)+":"+i[2]:"23:59:59")}},uploadPicture(t){const e=this.loading();let i=new FormData;i.append("file",t.file),i.append("type","laf"),i.append("cookie",c.Z.get("loginAs")),(0,o.Z)({method:"post",url:l.Z.uploadImg,data:i}).then((t=>{e.close(),200!=t.status?this.alert(this.$t("System.NetworkIssue"),this.$t("System.Error")):"IMAGE_UPLOAD_SUCCESS"==t.data.status&&(this.picture=l.Z.server+t.data.id,this.pictureRaw=t.data.id)}))},beforePictureUpload(t){return"image/jpeg"!=t.type&&"image/png"!=t.type?(this.alert(this.$t("Laf.PictureWrongType"),this.$t("System.Warning")),!1):!(t.size/1024/1024>2)||(this.alert(this.$t("Laf.PictureTooLarge"),this.$t("System.Warning")),!1)}},mounted(){this.getSchool()}},u=h,m=i(1001),d=(0,m.Z)(u,s,a,!1,null,"417ecf3d",null),A=d.exports},7596:function(t){t.exports="data:image/png;base64,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"}}]);
//# sourceMappingURL=226.cc0420be.js.map