{"version":3,"file":"js/226.cc0420be.js","mappings":"mKAAA,IAAIA,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACA,EAAG,MAAM,CAACA,EAAG,UAAU,CAACE,YAAY,OAAOC,MAAM,CAAC,OAAS,UAAU,CAACH,EAAG,aAAa,CAACE,YAAY,UAAUC,MAAM,CAAC,mBAAmB,SAASC,GAAG,CAAC,MAAQN,EAAIO,cAAc,CAACL,EAAG,MAAM,CAACE,YAAY,QAAQ,CAACF,EAAG,WAAW,CAACE,YAAY,WAAWC,MAAM,CAAC,IAAMG,EAAQ,SAAoCN,EAAG,OAAO,CAACE,YAAY,YAAY,CAACJ,EAAIS,GAAGT,EAAIU,GAAGV,EAAIW,GAAG,uBAAuB,KAAKT,EAAG,MAAM,CAACE,YAAY,OAAO,CAACF,EAAG,YAAY,CAACU,YAAY,CAAC,QAAU,SAASP,MAAM,CAAC,eAAe,UAAU,iBAAiB,UAAU,cAAcJ,KAAKU,GAAG,gBAAgB,gBAAgBV,KAAKU,GAAG,eAAe,eAAe,EAAE,iBAAiB,GAAGE,MAAM,CAACC,MAAOd,EAAIe,KAAMC,SAAS,SAAUC,GAAMjB,EAAIe,KAAKE,CAAG,EAAEC,WAAW,WAAW,GAAGhB,EAAG,MAAM,CAACE,YAAY,OAAO,CAACF,EAAG,MAAM,CAACE,YAAY,YAAY,CAACF,EAAG,WAAW,CAACE,YAAY,gBAAgBC,MAAM,CAAC,YAAcJ,KAAKU,GAAG,YAAY,UAAY,IAAI,UAAY,MAAME,MAAM,CAACC,MAAOd,EAAImB,KAAMH,SAAS,SAAUC,GAAMjB,EAAImB,KAAKF,CAAG,EAAEC,WAAW,UAAUhB,EAAG,WAAW,CAACE,YAAY,gBAAgBC,MAAM,CAAC,YAAcJ,KAAKU,GAAG,YAAY,UAAY,IAAI,UAAY,MAAME,MAAM,CAACC,MAAOd,EAAIoB,KAAMJ,SAAS,SAAUC,GAAMjB,EAAIoB,KAAKH,CAAG,EAAEC,WAAW,WAAW,GAAGhB,EAAG,MAAM,CAACE,YAAY,gBAAgB,CAACF,EAAG,WAAW,CAACE,YAAY,kBAAkBC,MAAM,CAAC,SAAW,IAAIQ,MAAM,CAACC,MAAOd,EAAIqB,WAAYL,SAAS,SAAUC,GAAMjB,EAAIqB,WAAWJ,CAAG,EAAEC,WAAW,gBAAgBhB,EAAG,WAAW,CAACE,YAAY,oBAAoBC,MAAM,CAAC,YAAcJ,KAAKU,GAAG,gBAAgB,UAAY,IAAI,UAAY,MAAME,MAAM,CAACC,MAAOd,EAAIsB,SAAUN,SAAS,SAAUC,GAAMjB,EAAIsB,SAASL,CAAG,EAAEC,WAAW,cAAyB,GAAVlB,EAAIe,KAASb,EAAG,WAAW,CAACE,YAAY,yBAAyBC,MAAM,CAAC,YAAcJ,KAAKU,GAAG,mBAAmBE,MAAM,CAACC,MAAOd,EAAIuB,cAAeP,SAAS,SAAUC,GAAMjB,EAAIuB,cAAcN,CAAG,EAAEC,WAAW,mBAAmBlB,EAAIwB,MAAM,GAAGtB,EAAG,MAAM,CAACE,YAAY,QAAQ,CAACF,EAAG,iBAAiB,CAACE,YAAY,aAAaC,MAAM,CAAC,KAAO,OAAO,YAAcJ,KAAKU,GAAG,sBAAsB,MAAQ,QAAQ,eAAe,WAAW,KAAO,QAAQ,WAAY,EAAM,iBAAiBX,EAAIyB,sBAAsB,UAAW,GAAOnB,GAAG,CAAC,OAAS,SAASoB,GAAQ,OAAO1B,EAAI2B,YAAY,GAAGd,MAAM,CAACC,MAAOd,EAAI4B,WAAW,GAAIZ,SAAS,SAAUC,GAAMjB,EAAI6B,KAAK7B,EAAI4B,WAAY,EAAGX,EAAI,EAAEC,WAAW,mBAAmBhB,EAAG,iBAAiB,CAACE,YAAY,aAAaC,MAAM,CAAC,YAAcJ,KAAKU,GAAG,sBAAsB,eAAe,SAAS,KAAO,QAAQ,WAAY,EAAM,iBAAiBX,EAAI8B,sBAAsB,SAA8B,MAAnB9B,EAAI4B,WAAW,GAAS,UAAW,GAAOtB,GAAG,CAAC,MAAQN,EAAI+B,0BAA0BlB,MAAM,CAACC,MAAOd,EAAI4B,WAAW,GAAIZ,SAAS,SAAUC,GAAMjB,EAAI6B,KAAK7B,EAAI4B,WAAY,EAAGX,EAAI,EAAEC,WAAW,oBAAoB,GAAGhB,EAAG,MAAM,CAACE,YAAY,aAAa,CAACF,EAAG,YAAY,CAACE,YAAY,WAAWC,MAAM,CAAC,OAAS,2BAA2B,kBAAiB,EAAM,eAAeL,EAAIgC,cAAc,gBAAgBhC,EAAIiC,sBAAsB,CAAEjC,EAAIkC,QAAShC,EAAG,MAAM,CAACE,YAAY,cAAcC,MAAM,CAAC,IAAML,EAAIkC,WAAWhC,EAAG,IAAI,CAACE,YAAY,yCAAyC,GAAGF,EAAG,MAAM,CAACE,YAAY,UAAU,CAACF,EAAG,YAAY,CAACE,YAAY,SAASC,MAAM,CAAC,KAAO,WAAWC,GAAG,CAAC,MAAQ,SAASoB,GAAQ,OAAO1B,EAAImC,OAAO,EAAE,IAAI,CAACnC,EAAIS,GAAGT,EAAIU,GAAGV,EAAIW,GAAG,oBAAoB,MAAM,IAAI,IAChzG,EACIyB,EAAkB,G,sCCkEtB,MAAAC,GAAAC,EAAAA,EAAAA,IAAA,gBAEA,OACAnB,KAAA,UACAoB,OACA,OACAxB,KAAA,EACAyB,OAAA,GACArB,KAAA,GACAC,KAAA,GACAqB,OAAA,GACApB,WAAA,GACAC,SAAA,GACAC,cAAA,GACAW,QAAA,GACAQ,WAAA,GACAd,WAAA,GACAH,sBAAA,CACAkB,aAAAC,GACA,OAAAA,EAAAC,WAAAC,KAAAC,KACA,GAEAjB,sBAAA,GAEA,EACAkB,QAAA,CACAzC,cACA,KAAA0C,KAAAC,MAAA,cACA,EACAf,SACA,YAAAhB,MAAA,SAAAC,MAAA,SAAAE,WAAA,KAAAM,WAAA,UAAAA,WAAA,YAAAb,MAAA,SAAA2B,WAEA,OADA,KAAAS,MAAA,KAAAxC,GAAA,gCAAAA,GAAA,kBACA,EAGA,KAAAyC,SAAA,KAAAzC,GAAA,0BAAAA,GAAA,mBACA0C,kBAAA,KAAA1C,GAAA,cACA2C,iBAAA,KAAA3C,GAAA,aACAI,KAAA,YACAwC,MAAA,KACA,MAAAC,EAAA,KAAAC,WAEAC,EAAAA,EAAAA,GAAA,CACAC,OAAA,OACAC,IAAAC,EAAAA,EAAAA,QACAtB,KAAA,IAAAuB,gBAAA,CACA,YAAAtB,OACA,MAAAH,IACA,UAAAtB,KACA,UAAAI,KACA,UAAAC,KACA,YAAAqB,OACA,cAAAnB,SACA,sBAAAP,KAAA,KAAAQ,cAAA,GACA,cAAAwC,aACA,aAAArB,eAEAa,MAAAS,IAEA,GADAR,EAAAS,QACA,KAAAD,EAAAE,OACA,KAAAf,MAAA,KAAAxC,GAAA,4BAAAA,GAAA,qBAEA,CACA,sBAAAqD,EAAAzB,KAEA,YADA,KAAAJ,SAGA,qBAAA6B,EAAAzB,KAAA2B,SACA,KAAAjB,KAAAC,MAAA,kBACA,KAAAC,MAAA,KAAAxC,GAAA,4BAAAA,GAAA,yBACA,KAAAsC,KAAAC,MAAA,gBAAAc,EAAAzB,KAAA4B,MAAA,IAGA,IACA,IACAC,OAAA,KACA,GAGA,EACAC,YACA,MAAAb,EAAA,KAAAC,WAEAC,EAAAA,EAAAA,GAAA,CACAC,OAAA,OACAC,IAAAC,EAAAA,EAAAA,KACAtB,KAAA,IAAAuB,gBAAA,CACA,UACA,OAAAQ,EAAAA,EAAAA,IAAA,eAEAf,MAAAS,IACAR,EAAAS,QACA,KAAAD,EAAAE,OACA,KAAAf,MAAA,KAAAxC,GAAA,4BAAAA,GAAA,iBAGA,gBAAAqD,EAAAzB,KACA,KAAAY,MAAA,KAAAxC,GAAA,8BAAAA,GAAA,iBAEA,cAAAqD,EAAAzB,KAAA2B,SACA,KAAA1B,OAAAwB,EAAAzB,KAAAgC,OACA,KAAA9B,OAAAuB,EAAAzB,KAAAE,OACA,KAAApB,WAAA,KAAAmD,aAAAR,EAAAzB,KAAAE,QAEA,GAEA,EACAsB,aACA,IAAAU,EAAA,KAAA7C,WAAA,GAAA8C,UAAA,cAAA9C,WAAA,GAAA8C,UAAA,cAAA9C,WAAA,GAAA8C,UAAA,SAEA,OADAD,GAAA,KAAA7C,WAAA,GAAA8C,UAAA,cAAA9C,WAAA,GAAA8C,UAAA,cAAA9C,WAAA,GAAA8C,UAAA,KACA,IAAA5B,KAAA2B,GAAA5B,SACA,EACAlB,aACA,KAAAC,WAAA,QACA,KAAAE,sBAAA,EACA,EACAC,2BACA,IAAA4C,EAAA,IAAA7B,KACA8B,EAAAD,EAAAE,cAAAC,WACAF,GAAAD,EAAAI,WAAA,UAAAJ,EAAAI,WAAA,GAAAJ,EAAAI,WAAA,EACAH,GAAAD,EAAAK,UAAA,OAAAL,EAAAK,UAAAL,EAAAK,UAEA,IAAAC,EAAA,GAEAA,EAAA,GAAAN,EAAAO,WAAA,OAAAP,EAAAO,WAAAJ,WAAAH,EAAAO,WAAAJ,WACAG,EAAA,GAAAN,EAAAQ,aAAA,OAAAR,EAAAQ,aAAAR,EAAAQ,aACAF,EAAA,QACAA,EAAA,OACAA,EAAA,OAEAA,EAAA,GAAAN,EAAAS,aAAA,OAAAT,EAAAS,aAAAT,EAAAS,aAEA,KAAAtD,sBAAA,CACAuD,gBAAA,oBAAAzD,WAAA,IAAAgD,EACAK,EAAA,QAAAA,EAAA,WAAAA,EAAA,eAEA,EACAjD,cAAAsD,GACA,MAAA9B,EAAA,KAAAC,UAEA,IAAA8B,EAAA,IAAAC,SACAD,EAAAE,OAAA,OAAAH,EAAAA,MACAC,EAAAE,OAAA,cACAF,EAAAE,OAAA,SAAAnB,EAAAA,EAAAA,IAAA,aAEAZ,EAAAA,EAAAA,GAAA,CACAC,OAAA,OACAC,IAAAC,EAAAA,EAAAA,UACAtB,KAAAgD,IACAhC,MAAAS,IACAR,EAAAS,QAEA,KAAAD,EAAAE,OACA,KAAAf,MAAA,KAAAxC,GAAA,4BAAAA,GAAA,iBAGA,wBAAAqD,EAAAzB,KAAA2B,SACA,KAAAhC,QAAA2B,EAAAA,EAAAA,OAAAG,EAAAzB,KAAAmD,GACA,KAAAhD,WAAAsB,EAAAzB,KAAAmD,GAEA,GAEA,EACAzD,oBAAAqD,GACA,oBAAAA,EAAAvE,MAAA,aAAAuE,EAAAvE,MACA,KAAAoC,MAAA,KAAAxC,GAAA,6BAAAA,GAAA,oBACA,KAEA2E,EAAAK,KAAA,eACA,KAAAxC,MAAA,KAAAxC,GAAA,4BAAAA,GAAA,oBACA,EAKA,GAEAiF,UACA,KAAAvB,WACA,GCvPwQ,I,UCQpQwB,GAAY,OACd,EACA9F,EACAqC,GACA,EACA,KACA,WACA,MAIF,EAAeyD,EAAiB,O","sources":["webpack://jihome_front/./src/components/pages/page_laf/LafNew.vue","webpack://jihome_front/src/components/pages/page_laf/LafNew.vue","webpack://jihome_front/./src/components/pages/page_laf/LafNew.vue?dd7f","webpack://jihome_front/./src/components/pages/page_laf/LafNew.vue?2d23"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('div',[_c('el-card',{staticClass:\"card\",attrs:{\"shadow\":\"hover\"}},[_c('el-divider',{staticClass:\"divider\",attrs:{\"content-position\":\"right\"},on:{\"click\":_vm.backLafList}},[_c('div',{staticClass:\"back\"},[_c('el-image',{staticClass:\"backIcon\",attrs:{\"src\":require('@/../public/assets/return.png')}}),_c('span',{staticClass:\"backWord\"},[_vm._v(_vm._s(_vm.$t('General.Return')))])],1)]),_c('div',{staticClass:\"tag\"},[_c('el-switch',{staticStyle:{\"display\":\"block\"},attrs:{\"active-color\":\"#13ce66\",\"inactive-color\":\"#ff4949\",\"active-text\":this.$t('Laf.TagFound'),\"inactive-text\":this.$t('Laf.TagLost'),\"active-value\":0,\"inactive-value\":1},model:{value:(_vm.type),callback:function ($$v) {_vm.type=$$v},expression:\"type\"}})],1),_c('div',{staticClass:\"new\"},[_c('div',{staticClass:\"itemInfo\"},[_c('el-input',{staticClass:\"inputBox name\",attrs:{\"placeholder\":this.$t('Laf.Name'),\"minlength\":\"2\",\"maxlength\":\"16\"},model:{value:(_vm.name),callback:function ($$v) {_vm.name=$$v},expression:\"name\"}}),_c('el-input',{staticClass:\"inputBox desc\",attrs:{\"placeholder\":this.$t('Laf.Desc'),\"minlength\":\"2\",\"maxlength\":\"50\"},model:{value:(_vm.desc),callback:function ($$v) {_vm.desc=$$v},expression:\"desc\"}})],1),_c('div',{staticClass:\"itemLocation\"},[_c('el-input',{staticClass:\"inputBox school\",attrs:{\"disabled\":\"\"},model:{value:(_vm.showSchool),callback:function ($$v) {_vm.showSchool=$$v},expression:\"showSchool\"}}),_c('el-input',{staticClass:\"inputBox location\",attrs:{\"placeholder\":this.$t('Laf.Location'),\"minlength\":\"5\",\"maxlength\":\"16\"},model:{value:(_vm.location),callback:function ($$v) {_vm.location=$$v},expression:\"location\"}}),(_vm.type==0)?_c('el-input',{staticClass:\"inputBox placeLocation\",attrs:{\"placeholder\":this.$t('Laf.PlaceInput')},model:{value:(_vm.placeLocation),callback:function ($$v) {_vm.placeLocation=$$v},expression:\"placeLocation\"}}):_vm._e()],1),_c('div',{staticClass:\"time\"},[_c('el-date-picker',{staticClass:\"timePicker\",attrs:{\"type\":\"date\",\"placeholder\":this.$t('Laf.TimeSelectDate'),\"align\":\"right\",\"value-format\":\"yyyyMMdd\",\"size\":\"small\",\"clearable\":false,\"picker-options\":_vm.timePickerDateOptions,\"editable\":false},on:{\"change\":function($event){return _vm.changeDate()}},model:{value:(_vm.timePicker[0]),callback:function ($$v) {_vm.$set(_vm.timePicker, 0, $$v)},expression:\"timePicker[0]\"}}),_c('el-time-picker',{staticClass:\"timePicker\",attrs:{\"placeholder\":this.$t('Laf.TimeSelectTime'),\"value-format\":\"HHmmss\",\"size\":\"small\",\"clearable\":false,\"picker-options\":_vm.timePickerTimeOptions,\"disabled\":_vm.timePicker[0]==null,\"editable\":false},on:{\"focus\":_vm.setTimePickerTimeOptions},model:{value:(_vm.timePicker[1]),callback:function ($$v) {_vm.$set(_vm.timePicker, 1, $$v)},expression:\"timePicker[1]\"}})],1),_c('div',{staticClass:\"uploadPic\"},[_c('el-upload',{staticClass:\"uploader\",attrs:{\"action\":\"server.default.uploadImg\",\"show-file-list\":false,\"http-request\":_vm.uploadPicture,\"before-upload\":_vm.beforePictureUpload}},[(_vm.picture)?_c('img',{staticClass:\"avatarImage\",attrs:{\"src\":_vm.picture}}):_c('i',{staticClass:\"el-icon-plus avatar-uploader-icon\"})])],1),_c('div',{staticClass:\"button\"},[_c('el-button',{staticClass:\"button\",attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.submit(0)}}},[_vm._v(_vm._s(_vm.$t('Laf.Confirm')))])],1)])],1)],1)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <div>\r\n      <el-card shadow='hover' class='card'>\r\n        <el-divider class='divider' content-position=\"right\" @click='backLafList'>\r\n          <div class='back'>\r\n            <el-image class='backIcon' :src=\"require('@/../public/assets/return.png')\"></el-image>\r\n            <span class='backWord'>{{$t('General.Return')}}</span>\r\n          </div>\r\n        </el-divider>\r\n\r\n        <div class='tag'>\r\n          <el-switch style=\"display: block\" v-model=\"type\" active-color=\"#13ce66\" inactive-color=\"#ff4949\"\r\n            :active-text=\"this.$t('Laf.TagFound')\" :inactive-text=\"this.$t('Laf.TagLost')\" :active-value=\"0\"\r\n            :inactive-value=\"1\">\r\n          </el-switch>\r\n        </div>\r\n\r\n        <div class='new'>\r\n          <div class='itemInfo'>\r\n            <el-input class='inputBox name' :placeholder=\"this.$t('Laf.Name')\" minlength=\"2\" maxlength=\"16\"\r\n              v-model='name'></el-input>\r\n            <el-input class='inputBox desc' :placeholder=\"this.$t('Laf.Desc')\" minlength=\"2\" maxlength=\"50\"\r\n              v-model='desc'></el-input>\r\n          </div>\r\n\r\n          <div class='itemLocation'>\r\n            <el-input class='inputBox school' v-model='showSchool' disabled></el-input>\r\n            <el-input class='inputBox location' :placeholder=\"this.$t('Laf.Location')\" minlength=\"5\" maxlength=\"16\"\r\n              v-model='location'></el-input>\r\n            <el-input class='inputBox placeLocation' v-model='placeLocation' :placeholder=\"this.$t('Laf.PlaceInput')\"\r\n              v-if='type==0'></el-input>\r\n          </div>\r\n\r\n          <div class='time'>\r\n            <el-date-picker class='timePicker' type=\"date\" :placeholder=\"this.$t('Laf.TimeSelectDate')\" align=\"right\"\r\n              value-format='yyyyMMdd' size='small' :clearable='false' v-model='timePicker[0]'\r\n              :picker-options='timePickerDateOptions' :editable='false' @change='changeDate()'>\r\n            </el-date-picker>\r\n            <el-time-picker class='timePicker' :placeholder=\"this.$t('Laf.TimeSelectTime')\" value-format='HHmmss'\r\n              size='small' :clearable='false' v-model='timePicker[1]' @focus='setTimePickerTimeOptions'\r\n              :picker-options='timePickerTimeOptions' :disabled='timePicker[0]==null' :editable=\"false\">\r\n            </el-time-picker>\r\n          </div>\r\n\r\n          <div class='uploadPic'>\r\n            <el-upload class=\"uploader\" action=\"server.default.uploadImg\" :show-file-list=\"false\"\r\n              :http-request=\"uploadPicture\" :before-upload=\"beforePictureUpload\">\r\n              <img v-if='picture' :src='picture' class=\"avatarImage\" />\r\n              <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\r\n            </el-upload>\r\n          </div>\r\n\r\n          <div class='button'>\r\n            <el-button class='button' type='primary' @click='submit(0)'>{{$t('Laf.Confirm')}}</el-button>\r\n          </div>\r\n        </div>\r\n      </el-card>\r\n    </div>\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\nimport Cookies from 'js-cookie'\r\nimport * as server from '../../../server.js'\r\nimport { customAlphabet } from 'nanoid';\r\nconst nanoid = customAlphabet('1234567890', 9);\r\n\r\nexport default {\r\n  name: 'laf-new',\r\n  data () {\r\n    return {\r\n      type: 0,\r\n      userID: '',\r\n      name: '',\r\n      desc: '',\r\n      school: '',\r\n      showSchool: '',\r\n      location: '',\r\n      placeLocation: '',\r\n      picture: '',\r\n      pictureRaw: '',\r\n      timePicker: [],\r\n      timePickerDateOptions: {\r\n        disabledDate (time) {\r\n          return time.getTime() >= Date.now();\r\n        },\r\n      },\r\n      timePickerTimeOptions: {}\r\n    }\r\n  },\r\n  methods: {\r\n    backLafList () {\r\n      this.$bus.$emit('showLafList')\r\n    },\r\n    submit () {\r\n      if (this.name == '' || this.desc == '' || this.location == '' || !this.timePicker[0] || !this.timePicker[1] || (this.type == 0 && this.pictureRaw == '')) {\r\n        this.alert(this.$t('Laf.NewConfirmInfoEmpty'), this.$t('System.Error'));\r\n        return false;\r\n      }\r\n      else {\r\n        this.$confirm(this.$t('Laf.NewConfirmAsk'), this.$t('System.Warning'), {\r\n          confirmButtonText: this.$t('System.Yes'),\r\n          cancelButtonText: this.$t('System.No'),\r\n          type: 'warning'\r\n        }).then(() => {\r\n          const loadingInstance = this.loading();\r\n\r\n          axios({\r\n            method: 'post',\r\n            url: server.default.postLaf,\r\n            data: new URLSearchParams({\r\n              'userid': this.userID,\r\n              'lafid': nanoid(),\r\n              'type': this.type,\r\n              'name': this.name,\r\n              'desc': this.desc,\r\n              'school': this.school,\r\n              'location': this.location,\r\n              'placeLocation': this.type == 0 ? this.placeLocation : '',\r\n              'thatTime': this.formatTime(),\r\n              'picture': this.pictureRaw\r\n            })\r\n          }).then((response) => {\r\n            loadingInstance.close();\r\n            if (response.status != 200) {\r\n              this.alert(this.$t('System.NetworkIssue'), this.$t('System.Error'))\r\n            }\r\n            else {\r\n              if (response.data == 'LAF_LAFID_TAKEN') {\r\n                this.submit();\r\n                return;\r\n              }\r\n              else if (response.data.status == 'LAF_POST_COMPLETE') {\r\n                this.$bus.$emit('refreshLafList');\r\n                this.alert(this.$t('Laf.NewCompleteJump'), this.$t('Laf.NewComplete'), () => {\r\n                  this.$bus.$emit('showLafDetail', response.data.lafid);\r\n                })\r\n              }\r\n            }\r\n          })\r\n        }).catch(() => {\r\n          return;\r\n        });\r\n      }\r\n    },\r\n    getSchool () {\r\n      const loadingInstance = this.loading();\r\n\r\n      axios({\r\n        method: 'post',\r\n        url: server.default.user,\r\n        data: new URLSearchParams({\r\n          'type': 'me',\r\n          'cookie': Cookies.get('loginAs')\r\n        })\r\n      }).then((response) => {\r\n        loadingInstance.close();\r\n        if (response.status != 200) {\r\n          this.alert(this.$t('System.NetworkIssue'), this.$t('System.Error'))\r\n        }\r\n        else {\r\n          if (response.data == 'USER_NOMATCH') {\r\n            this.alert(this.$t('System.IllegalRequest'), this.$t('System.Error'));\r\n          }\r\n          else if (response.data.status == 'USER_FOUND') {\r\n            this.userID = response.data.userid;\r\n            this.school = response.data.school;\r\n            this.showSchool = this.formatSchool(response.data.school)\r\n          }\r\n        }\r\n      });\r\n    },\r\n    formatTime () {\r\n      let timeString = this.timePicker[0].substring(0, 4) + '/' + this.timePicker[0].substring(4, 6) + '/' + this.timePicker[0].substring(6, 8) + ' ';\r\n      timeString += this.timePicker[1].substring(0, 2) + ':' + this.timePicker[1].substring(2, 4) + ':' + this.timePicker[1].substring(4, 6);\r\n      return new Date(timeString).getTime();\r\n    },\r\n    changeDate () {\r\n      this.timePicker[1] = null;\r\n      this.timePickerTimeOptions = {};\r\n    },\r\n    setTimePickerTimeOptions () {\r\n      let timeStamp = new Date();\r\n      let currentTimeDate = timeStamp.getFullYear().toString();\r\n      currentTimeDate += (timeStamp.getMonth() + 1) < 10 ? '0' + (timeStamp.getMonth() + 1) : timeStamp.getMonth() + 1;\r\n      currentTimeDate += timeStamp.getDate() < 10 ? '0' + timeStamp.getDate() : timeStamp.getDate();\r\n\r\n      let currentTimeClock = [];\r\n\r\n      currentTimeClock[0] = timeStamp.getHours() < 10 ? '0' + timeStamp.getHours().toString() : timeStamp.getHours().toString();\r\n      currentTimeClock[1] = timeStamp.getMinutes() < 10 ? '0' + timeStamp.getMinutes() : timeStamp.getMinutes();\r\n      if (currentTimeClock[1] < 10) {\r\n        currentTimeClock[1] += 60;\r\n        currentTimeClock[0] -= 1;\r\n      }\r\n      currentTimeClock[2] = timeStamp.getSeconds() < 10 ? '0' + timeStamp.getSeconds() : timeStamp.getSeconds();\r\n\r\n      this.timePickerTimeOptions = {\r\n        selectableRange: '00:00:00 - ' + (this.timePicker[0] == currentTimeDate ?\r\n          currentTimeClock[0] + ':' + (currentTimeClock[1] - 10) + ':' + currentTimeClock[2] : '23:59:59')\r\n      }\r\n    },\r\n    uploadPicture (file) {\r\n      const loadingInstance = this.loading();\r\n\r\n      let formData = new FormData();\r\n      formData.append(\"file\", file.file);\r\n      formData.append(\"type\", \"laf\");\r\n      formData.append(\"cookie\", Cookies.get('loginAs'))\r\n\r\n      axios({\r\n        method: \"post\",\r\n        url: server.default.uploadImg,\r\n        data: formData\r\n      }).then((response) => {\r\n        loadingInstance.close();\r\n\r\n        if (response.status != 200) {\r\n          this.alert(this.$t('System.NetworkIssue'), this.$t('System.Error'))\r\n        }\r\n        else {\r\n          if (response.data.status == 'IMAGE_UPLOAD_SUCCESS') {\r\n            this.picture = server.default.server + response.data.id;\r\n            this.pictureRaw = response.data.id;\r\n          }\r\n        }\r\n      });\r\n    },\r\n    beforePictureUpload (file) {\r\n      if (file.type != 'image/jpeg' && file.type != 'image/png') {\r\n        this.alert(this.$t('Laf.PictureWrongType'), this.$t('System.Warning'));\r\n        return false;\r\n      }\r\n      else if (file.size / 1024 / 1024 > 2) {\r\n        this.alert(this.$t('Laf.PictureTooLarge'), this.$t('System.Warning'));\r\n        return false;\r\n      }\r\n      else {\r\n        return true;\r\n      }\r\n    },\r\n  },\r\n  mounted () {\r\n    this.getSchool();\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.card {\r\n  margin-left: 5%;\r\n  width: 90%;\r\n  border-radius: 20px;\r\n}\r\n.divider {\r\n  width: 80%;\r\n  margin-left: 10%;\r\n}\r\n.back {\r\n  cursor: pointer;\r\n}\r\n.backIcon {\r\n  color: rgb(252, 62, 5);\r\n  width: 20px;\r\n}\r\n.backWord {\r\n  font-size: 18px;\r\n  margin-left: 10px;\r\n}\r\n.new {\r\n  width: 80%;\r\n  margin-left: 10%;\r\n}\r\n.inputBox {\r\n  margin-top: 30px;\r\n  font-size: 20px;\r\n}\r\n.inputBox ::v-deep .el-input__inner {\r\n  border-radius: 10px;\r\n}\r\n.timePicker ::v-deep .el-input__inner {\r\n  border-radius: 10px;\r\n}\r\n.school {\r\n  width: 30%;\r\n  float: left;\r\n}\r\n.location {\r\n  width: 65%;\r\n  float: right;\r\n}\r\n.time {\r\n  text-align: left;\r\n  font-size: 20px;\r\n}\r\n.timePicker {\r\n  margin-top: 30px;\r\n  font-size: 20px;\r\n  width: 30%;\r\n  margin-right: 20px;\r\n}\r\n.uploadPic {\r\n  margin-top: 30px;\r\n  margin-bottom: 30px;\r\n  text-align: left;\r\n}\r\n.uploadPic .avatarWarn {\r\n  font-size: 18px;\r\n  margin-top: 15px;\r\n}\r\n.uploadPic .uploader .el-upload {\r\n  border: 1px dashed #d9d9d9;\r\n  border-radius: 6px;\r\n  cursor: pointer;\r\n  position: relative;\r\n  overflow: hidden;\r\n}\r\n.uploadPic .uploader .el-upload:hover {\r\n  border-color: #409eff;\r\n}\r\n.uploadPic .uploader .avatar-uploader-icon {\r\n  font-size: 28px;\r\n  color: #8c939d;\r\n  width: 178px;\r\n  height: 178px;\r\n  line-height: 178px;\r\n  text-align: center;\r\n  border: 1px solid gray;\r\n  border-radius: 15px;\r\n}\r\n.uploadPic .uploader .avatarImage {\r\n  width: 178px;\r\n  height: 178px;\r\n  display: block;\r\n  border: 1px solid gray;\r\n  border-radius: 15px;\r\n}\r\n.button {\r\n  font-size: 20px;\r\n  border-radius: 15px;\r\n}\r\n</style>","import mod from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./LafNew.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./LafNew.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./LafNew.vue?vue&type=template&id=417ecf3d&scoped=true&\"\nimport script from \"./LafNew.vue?vue&type=script&lang=js&\"\nexport * from \"./LafNew.vue?vue&type=script&lang=js&\"\nimport style0 from \"./LafNew.vue?vue&type=style&index=0&id=417ecf3d&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"417ecf3d\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","attrs","on","backLafList","require","_v","_s","$t","staticStyle","model","value","type","callback","$$v","expression","name","desc","showSchool","location","placeLocation","_e","timePickerDateOptions","$event","changeDate","timePicker","$set","timePickerTimeOptions","setTimePickerTimeOptions","uploadPicture","beforePictureUpload","picture","submit","staticRenderFns","nanoid","customAlphabet","data","userID","school","pictureRaw","disabledDate","time","getTime","Date","now","methods","$bus","$emit","alert","$confirm","confirmButtonText","cancelButtonText","then","loadingInstance","loading","axios","method","url","server","URLSearchParams","formatTime","response","close","status","lafid","catch","getSchool","Cookies","userid","formatSchool","timeString","substring","timeStamp","currentTimeDate","getFullYear","toString","getMonth","getDate","currentTimeClock","getHours","getMinutes","getSeconds","selectableRange","file","formData","FormData","append","id","size","mounted","component"],"sourceRoot":""}