"use strict";(self["webpackChunkjihome_front"]=self["webpackChunkjihome_front"]||[]).push([[294],{5294:function(e,t,s){s.r(t),s.d(t,{default:function(){return u}});var i=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"register"},[t("el-steps",{staticClass:"stepsBar",attrs:{active:e.registerStep,"finish-status":"success","align-center":""}},[t("el-step",{attrs:{title:e.$t("Login.RegisterStepEmail")}}),t("el-step",{attrs:{title:e.$t("Login.RegisterStepPassword")}}),t("el-step",{attrs:{title:e.$t("Login.RegisterStepRealInfo")}}),t("el-step",{attrs:{title:e.$t("Login.RegisterStepNickname")}}),t("el-step",{attrs:{title:e.$t("Login.RegisterStepComplete")}})],1),t("div",{staticClass:"stepList"},[t("div",{staticClass:"mainPan"},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.registerPan[0],expression:"registerPan[0]"}],staticClass:"stepEmail"},[t("el-input",{staticClass:"inputBox",attrs:{placeholder:e.$t("Login.InputEmail")},model:{value:e.registerEmail,callback:function(t){e.registerEmail=t},expression:"registerEmail"}}),t("el-input",{staticClass:"inputBox",attrs:{placeholder:e.$t("Login.InputEmailCode")},model:{value:e.registerEmailCode,callback:function(t){e.registerEmailCode=t},expression:"registerEmailCode"}}),t("br"),t("el-button",{staticClass:"button buttonLeft",attrs:{type:"primary"},on:{click:e.sendEmailCode}},[e._v(e._s(e.$t("Login.GetEmailCode")))]),t("el-button",{staticClass:"button",attrs:{type:"info"},on:{click:function(t){return e.window.open("mail.jnu.edu.cn")}}},[e._v(e._s(e.$t("Login.OpenEmailPage")))])],1),t("div",{directives:[{name:"show",rawName:"v-show",value:e.registerPan[1],expression:"registerPan[1]"}],staticClass:"stepPassword"},[t("el-input",{staticClass:"inputBox",attrs:{placeholder:e.$t("Login.InputPassword"),"show-password":""},model:{value:e.registerPassword,callback:function(t){e.registerPassword=t},expression:"registerPassword"}}),t("el-input",{staticClass:"inputBox",attrs:{placeholder:e.$t("Login.InputPasswordConfirm"),"show-password":""},model:{value:e.registerPasswordConfirm,callback:function(t){e.registerPasswordConfirm=t},expression:"registerPasswordConfirm"}})],1),t("div",{directives:[{name:"show",rawName:"v-show",value:e.registerPan[2],expression:"registerPan[2]"}],staticClass:"stepRealInfo"},[t("el-input",{staticClass:"inputBox",attrs:{placeholder:e.$t("Login.InputStudentID")},model:{value:e.registerStudentID,callback:function(t){e.registerStudentID=t},expression:"registerStudentID"}}),t("el-input",{staticClass:"inputBox",attrs:{placeholder:e.$t("Login.InputRealName")},model:{value:e.registerRealName,callback:function(t){e.registerRealName=t},expression:"registerRealName"}}),t("br"),t("el-select",{attrs:{placeholder:e.$t("Login.SelectSchool")},model:{value:e.registerSchool,callback:function(t){e.registerSchool=t},expression:"registerSchool"}},[t("el-option",{attrs:{value:"school_sp",label:e.$t("Login.SelectSchool0")}}),t("el-option",{attrs:{value:"school_py",label:e.$t("Login.SelectSchool1")}}),t("el-option",{attrs:{value:"school_zh",label:e.$t("Login.SelectSchool2")}}),t("el-option",{attrs:{value:"school_sz",label:e.$t("Login.SelectSchool3")}})],1),t("br"),t("el-tooltip",{attrs:{placement:"top"}},[t("div",{staticClass:"realInfoAnswer",attrs:{slot:"content"},slot:"content"},[e._v(" "+e._s(e.$t("Login.RealInfoAnswer1"))),t("br"),e._v(e._s(e.$t("Login.RealInfoAnswer2"))),t("br"),e._v(e._s(e.$t("Login.RealInfoAnswer3"))+" ")]),t("el-link",{staticClass:"realInfoAsk"},[t("el-icon",{staticClass:"el-icon-question"}),e._v(e._s(e.$t("Login.RealInfoAsk"))+" ")],1)],1),t("div",{staticClass:"realInfoWarn"},[e._v(e._s(e.$t("Login.RealInfoWarn")))])],1),t("div",{directives:[{name:"show",rawName:"v-show",value:e.registerPan[3],expression:"registerPan[3]"}],staticClass:"stepNickname"},[t("el-input",{staticClass:"inputBox",attrs:{placeholder:e.$t("Login.InputNickname")},model:{value:e.registerNickname,callback:function(t){e.registerNickname=t},expression:"registerNickname"}})],1),t("div",{directives:[{name:"show",rawName:"v-show",value:e.registerPan[4],expression:"registerPan[4]"}],staticClass:"stepPolicy"},[t("comp-policy"),t("el-checkbox",{staticClass:"checkbox",model:{value:e.registerAccept,callback:function(t){e.registerAccept=t},expression:"registerAccept"}},[e._v(e._s(e.$t("Login.RegisterPolicy")))])],1)])]),t("div",{staticClass:"panFooter"},[t("div",{staticClass:"stepContinue"},[t("el-button",{directives:[{name:"show",rawName:"v-show",value:0!=e.registerStep,expression:"registerStep!=0"}],ref:"previousStep",staticClass:"button buttonLeft",on:{click:e.previousStep}},[e._v(e._s(e.$t("Login.RegisterStepPrevious")))]),t("el-button",{directives:[{name:"show",rawName:"v-show",value:4!=e.registerStep,expression:"registerStep!=4"}],ref:"nextStep",staticClass:"button",on:{click:e.nextStep}},[e._v(e._s(e.$t("Login.RegisterStepNext")))]),t("el-button",{directives:[{name:"show",rawName:"v-show",value:4==e.registerStep,expression:"registerStep==4"}],ref:"complete",staticClass:"button",attrs:{disabled:!e.registerAccept},on:{click:e.complete}},[e._v(e._s(e.$t("Login.RegisterStepEnd")))])],1),t("div",{staticClass:"switchToLogin"},[t("el-link",{attrs:{type:"primary"},on:{click:e.switchToLogin}},[e._v(e._s(e.$t("Login.GotoLogin"))),t("br")])],1)])],1)])},r=[],a=s(4161),o=s(9702),n=s.n(o),l=s(1780),c=s(691);const h=(0,c.kP)("1234567890",9);var g={name:"comp-register",components:{CompPolicy:()=>s.e(491).then(s.bind(s,3491))},data(){return{registerStep:0,registerPan:[!0,!1,!1,!1,!1],registerEmail:"",registerEmailCode:"",registerPassword:"",registerPasswordConfirm:"",registerStudentID:"",registerRealName:"",registerSchool:"",registerNickname:"",registerAccept:!1,registerStepsChecked:[!1,!1,!1,!1]}},methods:{nextStep(){let e="";switch(this.registerStep){case 0:if(""==this.registerEmail||""==this.registerEmailCode)return void this.alert(this.$t("Login.RegisterEmailCodeEmpty"),this.$t("System.Error"));this.allowNextStep();break;case 1:if(this.registerPassword.length<8||this.registerPassword.length>16)return void this.alert(this.$t("Login.RegisterPasswordBad"),this.$t("System.Error"));if(this.registerPassword!=this.registerPasswordConfirm)return void this.alert(this.$t("Login.RegisterPasswordWrong"),this.$t("System.Error"));this.allowNextStep();break;case 2:if(this.registerStudentID<2015e6||this.registerStudentID>2024e6)return void this.alert(this.$t("Login.RegisterStudentIDBad"),this.$t("System.Error"));if(this.registerRealName.length<2||this.registerRealName.length>8)return void this.alert(this.$t("Login.RegisterRealNameBad"),this.$t("System.Error"));if(""==this.registerSchool)return void this.alert(this.$t("Login.RegisterSchoolEmpty"),this.$t("System.Error"));e=this.loading(),(0,a.Z)({method:"post",url:l.Z.register2,data:new URLSearchParams({studentid:this.registerStudentID,realname:this.registerRealName,school:this.registerSchool})}).then((t=>{e.close(),200!=t.status?this.alert(this.$t("System.NetworkIssue"),this.$t("System.Error"),{confirmButtonText:this.$t("System.Confirm")}):"REGISTER_STUDENTID_TAKEN"==t.data?this.alert(this.$t("Login.RegisterRealInfoTaken"),this.$t("System.Warning"),{confirmButtonText:this.$t("System.Confirm")}):"REGISTER_STUDENTID_OK"==t.data?this.allowNextStep():this.alert("Unexpected Response!",this.$t("System.Error"),{confirmButtonText:this.$t("System.Confirm")})}));break;case 3:if(this.registerNickname.length<3||this.registerNickname.length>10)return void this.alert(this.$t("Login.RegisterNicknameBad"),this.$t("System.Warning"));e=this.loading(),(0,a.Z)({method:"post",url:l.Z.register3,data:new URLSearchParams({nickname:this.registerNickname})}).then((t=>{e.close(),200!=t.status?this.alert(this.$t("System.NetworkIssue"),this.$t("System.Error"),{confirmButtonText:this.$t("System.Confirm")}):"REGISTER_USERNAME_TAKEN"==t.data?this.alert(this.$t("Login.RegisterNickNameTaken"),this.$t("System.Warning"),{confirmButtonText:this.$t("System.Confirm")}):"REGISTER_USERNAME_OK"==t.data?this.allowNextStep():this.alert("Unexpected Response!",this.$t("System.Error"),{confirmButtonText:this.$t("System.Confirm")})}));break;default:break}},allowNextStep(){this.registerStepsChecked[this.registerStep]=!0,this.registerPan[this.registerStep]=!1,this.registerStep=this.registerStep+1,this.registerPan[this.registerStep]=!0},previousStep(){this.registerPan[this.registerStep]=!1,this.registerStep=this.registerStep-1,this.registerPan[this.registerStep]=!0},sendEmailCode(){const e=/^(\w){1,20}@jnu\.edu\.cn$/;e.test(this.registerEmail)?console.log("good email"):console.log("bad email")},complete(){if(0==this.registerStepsChecked.filter((e=>0==e)).length&&this.registerAccept){let e=["school_sp","school_py","school_zh","school_sz"];const t=this.loading();(0,a.Z)({method:"post",url:l.Z.register4,data:new URLSearchParams({userid:h(),email:this.registerEmail,nickname:this.registerNickname,password:n()(this.registerPasswordConfirm),studentid:this.registerStudentID,realname:this.registerRealName,school:e.indexOf(this.registerSchool)})}).then((e=>{t.close(),200==e.status?"REGISTER_USERID_TAKEN"==e.data?this.complete():"REGISTER_COMPLETE"==e.data&&(this.alert(this.$t("Login.RegisterSuccess"),this.$t("System.Info"),{confirmButtonText:this.$t("System.Confirm")}),this.switchToLogin()):this.alert(this.$t("System.NetworkIssue"),this.$t("System.Error"))}))}},switchToLogin(){this.$bus.$emit("switchLogin","login")}}},p=g,m=s(1001),d=(0,m.Z)(p,i,r,!1,null,"3b1dda9b",null),u=d.exports}}]);
//# sourceMappingURL=294.023c2651.js.map