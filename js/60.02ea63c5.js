"use strict";(self["webpackChunkjihome_front"]=self["webpackChunkjihome_front"]||[]).push([[60],{6060:function(t,e,s){s.r(e),s.d(e,{default:function(){return p}});var i=function(){var t=this,e=t._self._c;return e("div",[e("div",[e("el-card",{staticClass:"card",attrs:{shodow:"hover"}},[e("el-divider",{staticClass:"divider",attrs:{"content-position":"right"},on:{click:t.backMarketList}},[e("div",{staticClass:"back"},[e("el-image",{staticClass:"backIcon",attrs:{src:s(7596)}}),e("span",{staticClass:"backWord"},[t._v(t._s(t.$t("Market.NewReturn")))])],1)]),e("div",{staticClass:"new"},[e("div",{staticClass:"itemInfo"},[e("el-input",{staticClass:"inputBox name",attrs:{placeholder:this.$t("Market.NewName"),minlength:"2",maxlength:"16"},model:{value:t.itemName,callback:function(e){t.itemName=e},expression:"itemName"}}),e("el-input",{staticClass:"inputBox version",attrs:{placeholder:this.$t("Market.NewVersion"),minlength:"1",maxlength:"10"},model:{value:t.itemVersion,callback:function(e){t.itemVersion=e},expression:"itemVersion"}}),e("el-input",{staticClass:"inputBox publish",attrs:{placeholder:this.$t("Market.NewPublish"),minlength:"5",maxlength:"16"},model:{value:t.itemPublish,callback:function(e){t.itemPublish=e},expression:"itemPublish"}})],1),e("div",{staticClass:"schoolClass"},[e("el-input",{staticClass:"inputBox school",attrs:{placeholder:this.$t("Market.NewSchool"),minlength:"2",maxlength:"16",disabled:""},model:{value:t.showSchool,callback:function(e){t.showSchool=e},expression:"showSchool"}}),e("el-input",{staticClass:"inputBox class",attrs:{placeholder:this.$t("Market.NewClass"),minlength:"2",maxlength:"16"},model:{value:t.classname,callback:function(e){t.classname=e},expression:"classname"}})],1),e("div",{staticClass:"uploadPic"},[e("el-upload",{staticClass:"uploader",attrs:{action:"server.default.uploadImg","show-file-list":!1,"http-request":t.uploadPicture,"before-upload":t.beforePictureUpload}},[t.picture?e("img",{staticClass:"uploadImage",attrs:{src:t.picture}}):e("i",{staticClass:"el-icon-plus uploadIcon"})])],1),e("div",{staticClass:"price"},[t._v(" "+t._s(this.$t("Market.NewPrice"))+" "),e("el-input-number",{staticClass:"priceInput",attrs:{min:.01,max:99.99,"controls-position":"right",precision:2,step:.1},on:{change:t.priceSetTip},model:{value:t.price,callback:function(e){t.price=e},expression:"price"}})],1),e("div",{staticClass:"itemStatus"},[e("div",{staticClass:"itemStatusItem broken"},[e("span",[t._v(t._s(this.$t("Market.NewBroken")))]),e("el-slider",{staticClass:"silder",attrs:{"format-tooltip":t.formatTooltip,step:5,"show-stops":""},model:{value:t.broken,callback:function(e){t.broken=e},expression:"broken"}})],1),e("div",{staticClass:"itemStatusItem written"},[e("span",[t._v(t._s(this.$t("Market.NewWritten")))]),e("el-slider",{staticClass:"silder",attrs:{"format-tooltip":t.formatTooltip,step:5,"show-stops":""},model:{value:t.written,callback:function(e){t.written=e},expression:"written"}})],1)]),e("div",{staticClass:"buttons"},[e("el-button",{staticClass:"button",attrs:{type:"primary"},on:{click:t.submit}},[t._v(t._s(t.$t("Hollow.NewConfirm")))])],1)])],1)],1)])},a=[],o=s(4161),r=s(680),l=s(1780),n=s(691);const c=(0,n.kP)("1234567890",9);var h={name:"market-new",data(){return{userID:0,itemName:"",itemVersion:"",itemPublish:"",classname:"",showSchool:"",school:0,price:5,broken:0,written:0,picture:"",pictureRaw:"",priceSetTime:0}},methods:{backMarketList(){this.$bus.$emit("showMarketList")},submit(){""!=this.itemName&&""!=this.itemVersion&&""!=this.itemPublish&&""!=this.classname&&""!=this.pictureRaw?this.itemName.length>10||this.itemVersion.length>5||this.itemPublish.length>10||this.classname.length>8?this.alert(this.$t("Market.NewConfirmInfoLong"),this.$t("System.Error")):this.$confirm(this.$t("Market.NewConfirmAsk"),this.$t("System.Warning"),{confirmButtonText:this.$t("System.Yes"),cancelButtonText:this.$t("System.No"),type:"warning"}).then((()=>{const t=this.loading();(0,o.Z)({method:"post",url:l.Z.postMarket,data:new URLSearchParams({itemid:c(),userid:this.userID,itemname:this.itemName,itemversion:this.itemVersion,itempublish:this.itemPublish,classname:this.classname,school:this.school,price:this.price,broken:this.broken,written:this.written,picture:this.pictureRaw})}).then((e=>{if(t.close(),200!=e.status)this.alert(this.$t("System.NetworkIssue"),this.$t("System.Error"));else{if("MARKET_ITEMID_TAKEN"==e.data)return void this.submit();"MARKET_POST_COMPLETE"==e.data.status&&(this.$bus.$emit("refreshMarketList"),this.alert(this.$t("Market.NewCompleteJump"),this.$t("Market.NewComplete"),(()=>{this.$bus.$emit("showMarketDetail",e.data.itemid)})))}}))})).catch((()=>{})):this.alert(this.$t("Market.NewConfirmInfoEmpty"),this.$t("System.Error"))},getSchool(){const t=this.loading();(0,o.Z)({method:"post",url:l.Z.user,data:new URLSearchParams({type:"me",cookie:r.Z.get("loginAs")})}).then((e=>{t.close(),200!=e.status?this.alert(this.$t("System.NetworkIssue"),this.$t("System.Error")):"USER_NOMATCH"==e.data?this.alert(this.$t("System.IllegalRequest"),this.$t("System.Error")):"USER_FOUND"==e.data.status&&(this.userID=e.data.userid,this.school=e.data.school,this.showSchool=this.formatSchool(e.data.school))}))},priceSetTip(){this.priceSetTime++,this.priceSetTime>5&&(this.$message(this.$t("Market.NewPriceTip")),this.priceSetTime=0)},formatTooltip(t){return t/100},uploadPicture(t){const e=this.loading();let s=new FormData;s.append("file",t.file),s.append("type","market"),s.append("cookie",r.Z.get("loginAs")),(0,o.Z)({method:"post",url:l.Z.uploadImg,data:s}).then((t=>{e.close(),200!=t.status?this.alert(this.$t("System.NetworkIssue"),this.$t("System.Error")):"IMAGE_UPLOAD_SUCCESS"==t.data.status&&(this.picture=l.Z.server+t.data.id,this.pictureRaw=t.data.id)}))},beforePictureUpload(t){return"image/jpeg"!=t.type&&"image/png"!=t.type?(this.alert(this.$t("Market.PictureWrongType"),this.$t("System.Warning")),!1):!(t.size/1024/1024>2)||(this.alert(this.$t("Market.PictureTooLarge"),this.$t("System.Warning")),!1)}},mounted(){this.getSchool()}},m=h,u=s(1001),A=(0,u.Z)(m,i,a,!1,null,"03008354",null),p=A.exports},7596:function(t){t.exports="data:image/png;base64,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"}}]);
//# sourceMappingURL=60.02ea63c5.js.map