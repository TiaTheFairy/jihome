"use strict";(self["webpackChunkjihome_front"]=self["webpackChunkjihome_front"]||[]).push([[884],{6884:function(e,s,t){t.r(s),t.d(s,{default:function(){return c}});var o=function(){var e=this,s=e._self._c;return s("div",{attrs:{id:"frame"}},[s("frame-header",{staticClass:"top"}),s("el-row",{staticClass:"middle",attrs:{gutter:10}},[s("el-col",{staticClass:"hidden-xs-only",attrs:{xs:0,sm:6,md:6,lg:5,xl:4}},[s("frame-left",{staticClass:"left"})],1),s("el-col",{attrs:{xs:24,sm:18,md:18,lg:19,xl:20}},[s("frame-content",{staticClass:"content"})],1)],1),s("frame-footer",{staticClass:"bottom hidden-sm-and-up"}),s("el-dialog",{staticClass:"dialog",attrs:{title:e.loginBoxTitle,visible:e.isLoginOpen,"close-on-click-modal":!1,"close-on-press-escape":!1,"show-close":!1,"append-to-body":!0,width:"90%"},on:{"update:visible":function(s){e.isLoginOpen=s}}},[s("div",{staticClass:"title"},[s("div",{staticClass:"main"},[e._v(e._s(e.$t("Login.PageTitle")))]),s("div",{staticClass:"desc"},[e._v(e._s(e.$t("Login.PageDescription")))])]),s("div",{staticClass:"loginBoxContent"},[s("comp-login",{ref:"login"}),s("comp-register",{ref:"register",attrs:{id:"register"}})],1),s("el-dropdown",{staticClass:"languageDropdown",on:{command:e.changeLang}},[s("div",{staticClass:"languageSelector"},[e._v(" 语言/語言/Language "),s("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),s("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[s("el-dropdown-item",{attrs:{command:"cn_zh"}},[e._v("简体中文")]),s("el-dropdown-item",{attrs:{command:"cn_tw"}},[e._v("繁體中文")]),s("el-dropdown-item",{attrs:{command:"en_us"}},[e._v("English")])],1)],1)],1),s("el-dialog",{attrs:{visible:e.badBrowserDialog,"close-on-click-modal":!1,"close-on-press-escape":!1,"show-close":!1,fullscreen:"",modal:!1},on:{"update:visible":function(s){e.badBrowserDialog=s}}},[s("BrowserOutdate")],1)],1)},i=[],n=t(4161),a=t(680),l=t(1780),r={name:"main-frame",components:{FrameHeader:()=>t.e(564).then(t.bind(t,5564)),FrameLeft:()=>Promise.all([t.e(321),t.e(402)]).then(t.bind(t,3402)),FrameContent:()=>t.e(805).then(t.bind(t,4805)),FrameFooter:()=>Promise.all([t.e(321),t.e(798)]).then(t.bind(t,1798)),CompLogin:()=>Promise.all([t.e(702),t.e(141)]).then(t.bind(t,2141)),CompRegister:()=>Promise.all([t.e(702),t.e(294)]).then(t.bind(t,5294)),BrowserOutdate:()=>t.e(10).then(t.bind(t,7010))},data(){return{isLoginOpen:!1,loginBoxTitle:"",badBrowserDialog:!1}},methods:{openLogin(){this.loginBoxTitle=this.$t("Login.Login"),this.isLoginOpen=!0},closeLogin(){this.isLoginOpen=!1},switchLogin(e){"login"==e?(this.loginBoxTitle=this.$t("Login.Login"),this.$refs.login.$el.style.display="block",this.$refs.register.$el.style.display="none"):"register"==e&&(this.loginBoxTitle=this.$t("Login.Register"),this.$refs.login.$el.style.display="none",this.$refs.register.$el.style.display="block")},changeLang(e){this.switchLang(e)},autoLogin(){if(a.Z.get("loginCookie")){const e=this.loading();(0,n.Z)({method:"post",url:l.Z.autoLogin,data:new URLSearchParams({cookie:a.Z.get("loginCookie")})}).then((s=>{e.close(),200!=s.status?this.alert(this.$t("System.NetworkIssue"),this.$t("System.Error")):"LOGIN_SUCCESS"==s.data.status?a.Z.set("loginAs",a.Z.get("loginCookie"),{expires:1}):(a.Z.remove("loginCookie"),a.Z.remove("loginAs"))}))}},bypassBrowser(e){this.badBrowserDialog=!1,1==e&&localStorage.setItem("browserBypass",!0)}},mounted(){if(document.getElementById("frame").style.height=window.outerHeight,null==localStorage.getItem("browserBypass"))localStorage.setItem("browserBypass",!1),location.reload();else if("false"==localStorage.getItem("browserBypass")){const e=navigator.userAgent;/Trident\/(\S+)/.test(e)?this.badBrowserDialog=!0:a.Z.get("loginCookie")?this.autoLogin():this.openLogin()}this.$bus.$on("bypassBrowser",this.bypassBrowser),this.$bus.$on("openMenu",this.openMenu),this.$bus.$on("closeMenu",this.closeMenu),this.$bus.$on("openChat",this.openChat),this.$bus.$on("closeChat",this.closeChat),this.$bus.$on("openLogin",this.openLogin),this.$bus.$on("closeLogin",this.closeLogin),this.$bus.$on("switchLogin",this.switchLogin)},beforeDestroy(){this.$bus.$off("bypassBrowser"),this.$bus.$off("openMenu"),this.$bus.$off("closeMenu"),this.$bus.$off("openChat"),this.$bus.$off("closeChat"),this.$bus.$off("openLogin"),this.$bus.$off("closeLogin"),this.$bus.$off("switchLogin")}},g=r,h=t(1001),d=(0,h.Z)(g,o,i,!1,null,"d49ddac2",null),c=d.exports}}]);
//# sourceMappingURL=884.6d5eea20.js.map